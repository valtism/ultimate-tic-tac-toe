(this["webpackJsonpultimate-tic-tac-toe"]=this["webpackJsonpultimate-tic-tac-toe"]||[]).push([[0],{21:function(e,t,r){},22:function(e,t,r){},33:function(e,t,r){"use strict";r.r(t);var n=r(1),c=r.n(n),a=r(7),i=r.n(a),l=(r(21),r(22),r(2)),o=(r(23),r(16)),s=r(3),u=r(8),d=r(4),f=Object(n.createContext)();function b(e){return g(Array(9).fill().map((function(t,r){return j(e,r)})))}function j(e,t){return g(function(e,t){return Array(9).fill().map((function(r,n){var c=O(t,n),a=e.indexOf(c);return-1===a?null:a%2===0?"X":"O"}))}(e,t))}function g(e){for(var t=[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]],r=0;r<t.length;r++){var n=Object(l.a)(t[r],3),c=n[0],a=n[1],i=n[2];if(e[c]&&e[c]===e[a]&&e[c]===e[i])return e[c]}return null}function O(e,t){return"".concat(e,",").concat(t)}function h(){return(h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function p(e,t){if(null==e)return{};var r,n,c=function(e,t){if(null==e)return{};var r,n,c={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(c[r]=e[r]);return c}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(c[r]=e[r])}return c}var v=n.createElement("path",{d:"M 2,2 l 20,20",stroke:"currentcolor",strokeWidth:4,strokeLinecap:"round"}),m=n.createElement("path",{d:"M 2,22 l 20,-20",stroke:"currentcolor",strokeWidth:4,strokeLinecap:"round"});function y(e,t){var r=e.title,c=e.titleId,a=p(e,["title","titleId"]);return n.createElement("svg",h({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",ref:t,"aria-labelledby":c},a),r?n.createElement("title",{id:c},r):null,v,m)}var w=n.forwardRef(y);r.p;function x(){return(x=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function k(e,t){if(null==e)return{};var r,n,c=function(e,t){if(null==e)return{};var r,n,c={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(c[r]=e[r]);return c}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(c[r]=e[r])}return c}var N=n.createElement("path",{d:"M 12 2 a 10 10 0 1 0 0.000001 0 z",fill:"none",stroke:"currentcolor",strokeWidth:4});function E(e,t){var r=e.title,c=e.titleId,a=k(e,["title","titleId"]);return n.createElement("svg",x({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",ref:t,"aria-labelledby":c},a),r?n.createElement("title",{id:c},r):null,N)}var I=n.forwardRef(E),S=(r.p,r(0));function P(e){var t=e.type,r=e.className,n=Object(u.a)(e,["type","className"]);switch(t){case"X":return Object(S.jsx)(w,Object(s.a)({className:Object(d.a)("text-red-500",r)},n));case"O":return Object(S.jsx)(I,Object(s.a)({className:Object(d.a)("text-blue-500",r)},n));default:return Object(S.jsx)("div",Object(s.a)({},n))}}function C(e){var t=e.turns,r=e.cellClick,n=e.allowedBoard;return Object(S.jsx)("div",{style:{gap:"4%"},className:"h-full relative grid grid-cols-3 rounded",children:Array(9).fill().map((function(e,c){return Object(S.jsx)(A,{turns:t,cellClick:r,allowedBoard:n,boardIndex:c},c)}))})}function A(e){var t=e.turns,r=e.cellClick,c=e.allowedBoard,a=e.boardIndex,i=Object(n.useContext)(f),o=j(t,a),s=!o&&[!0,a].includes(c),u=i?"blur(1px) contrast(130%) grayscale(40%)":"blur(1px) contrast(80%) grayscale(30%)";return Object(S.jsx)("div",{style:{gap:"4%",filter:!s&&u},className:"grid grid-cols-3 rounded",children:Array(9).fill().map((function(e,n){var c=O(a,n),i=function(e,t){var r=e.indexOf(t);return-1===r?null:r%2===0?"X":"O"}(t,c);return Object(S.jsx)(L,{id:c,onClick:function(){return r(c)},onKeyDown:function(e){var t=e.key;switch(t){case"ArrowUp":case"ArrowRight":case"ArrowDown":case"ArrowLeft":return function(e,t){var r=function(e,t){var r=t.split(",").map(Number),n=Object(l.a)(r,2),c=n[0],a=n[1];switch(e){case"ArrowUp":return[3,4,5,6,7,8].includes(a)?"".concat(c,",").concat(a-3):[0,1,2].includes(c)?t:"".concat(c-3,",").concat(a+6);case"ArrowRight":return[0,1,3,4,6,7].includes(a)?"".concat(c,",").concat(a+1):[2,5,8].includes(c)?t:"".concat(c+1,",").concat(a-2);case"ArrowDown":return[0,1,2,3,4,5].includes(a)?"".concat(c,",").concat(a+3):[6,7,8].includes(c)?t:"".concat(c+3,",").concat(a-6);case"ArrowLeft":return[1,2,4,5,7,8].includes(a)?"".concat(c,",").concat(a-1):[0,3,6].includes(c)?t:"".concat(c-1,",").concat(a+2);default:return t}}(e,t);document.getElementById(r).focus()}(t,c);default:return}},isValid:s,className:Object(d.a)("X"===o&&"bg-red-300 bg-opacity-70 dark:bg-red-600 dark:bg-opacity-30","O"===o&&"bg-blue-300 bg-opacity-70 dark:bg-blue-600 dark:bg-opacity-30"),children:Object(S.jsx)(P,{type:i,className:"animate-".concat(i," absolute w-1/2 h-1/2 text-gray-900")})},n)}))})}function L(e){var t=e.isValid,r=e.className,n=e.children,c=Object(u.a)(e,["isValid","className","children"]);return Object(S.jsx)("button",Object(s.a)(Object(s.a)({className:Object(d.a)("relative flex items-center justify-center rounded w-full h-full","bg-gray-200 dark:bg-gray-700 m-px","focus:outline-none focus:ring",!t&&"focus:ring-gray-500 focus:ring-opacity-50",!t&&"cursor-default",r)},c),{},{children:n}))}function M(){return(M=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function R(e,t){if(null==e)return{};var r,n,c=function(e,t){if(null==e)return{};var r,n,c={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(c[r]=e[r]);return c}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(c[r]=e[r])}return c}var B=n.createElement("polygon",{points:"18,2 4,12 18,22",stroke:"currentcolor",fill:"currentcolor",strokeLinejoin:"round",strokeWidth:2});function W(e,t){var r=e.title,c=e.titleId,a=R(e,["title","titleId"]);return n.createElement("svg",M({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",ref:t,"aria-labelledby":c},a),r?n.createElement("title",{id:c},r):null,B)}var X=n.forwardRef(W);r.p;function z(){return(z=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function D(e,t){if(null==e)return{};var r,n,c=function(e,t){if(null==e)return{};var r,n,c={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(c[r]=e[r]);return c}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(c[r]=e[r])}return c}var J=n.createElement("polygon",{points:"4,2 18,12 4,22",stroke:"currentcolor",fill:"currentcolor",strokeLinejoin:"round",strokeWidth:2});function T(e,t){var r=e.title,c=e.titleId,a=D(e,["title","titleId"]);return n.createElement("svg",z({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",ref:t,"aria-labelledby":c},a),r?n.createElement("title",{id:c},r):null,J)}var U=n.forwardRef(T);r.p;function V(e){var t=e.onLeftClick,r=e.onRightClick;return Object(S.jsxs)("div",{className:"flex items-center space-x-2 text-white",children:[Object(S.jsx)("button",{onClick:t,className:"bg-gray-500 hover:bg-gray-700 p-2 rounded-lg active:bg-gray-800 focus:outline-none focus:ring",children:Object(S.jsx)(X,{className:"w-4 h-4"})}),Object(S.jsx)("button",{onClick:r,className:"bg-gray-500 hover:bg-gray-700 p-2 rounded-lg active:bg-gray-800 focus:outline-none focus:ring",children:Object(S.jsx)(U,{className:"w-4 h-4"})})]})}function K(e,t){var r=Object(n.useState)((function(){var r=window.localStorage.getItem(e);return r?JSON.parse(r):t})),c=Object(l.a)(r,2),a=c[0],i=c[1];return[a,function(t){var r=t instanceof Function?t(a):t;i(r),window.localStorage.setItem(e,JSON.stringify(r))}]}function F(){var e=K("dark-mode"),t=Object(l.a)(e,2),r=t[0],c=t[1],a=function(){var e=Object(n.useState)(window.matchMedia("(prefers-color-scheme: dark)").matches),t=Object(l.a)(e,2),r=t[0],c=t[1];return Object(n.useEffect)((function(){var e=function(e){var t=e.matches;return c(t)};return window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",e),window.matchMedia("(prefers-color-scheme: dark)").removeEventListener("change",e)}),[]),r}(),i=void 0===r?a:r;return Object(n.useEffect)((function(){var e=document.documentElement;i?e.classList.add("dark"):e.classList.remove("dark")}),[i]),[i,c]}function q(){var e=Object(n.useState)([]),t=Object(l.a)(e,2),r=t[0],c=t[1],a=Object(n.useState)(0),i=Object(l.a)(a,2),o=i[0],s=i[1],u=r.slice(0,o),d=r.length%2===0,g=function(e){if(!e.length)return!0;var t=e[e.length-1],r=Number(t[2]);return!!j(e,r)||r}(u),O=b(u);!function(e,t){Object(n.useEffect)((function(){function r(r){switch(r.key){case"k":return t((function(e){return Math.max(e-1,0)}));case"j":return t((function(t){return Math.min(t+1,e.length)}));case"K":return t(0);case"J":return t(e.length);default:return}}return window.addEventListener("keydown",r),function(){return window.removeEventListener("keydown",r)}}),[t,e.length])}(r,s);var h=F(),p=Object(l.a)(h,2),v=p[0],m=p[1];return Object(S.jsx)(f.Provider,{value:v,children:Object(S.jsxs)("div",{className:"bg-white dark:bg-gray-900 flex flex-col items-center space-y-2",children:[Object(S.jsx)("h1",{className:"font-display text-xl mt-4 text-gray-900 dark:text-white",children:"Ultimate Tic-Tac-Toe"}),Object(S.jsx)("div",{className:"absolute top-2 right-4",children:Object(S.jsx)(Y,{dark:v,setDark:m})}),Object(S.jsxs)(G,{children:[Object(S.jsx)(C,{turns:u,cellClick:function(e){if(function(e,t,r,n){if(e!==t.length)return!1;if(t.includes(r))return!1;var c=Number(r[0]);return!![!0,c].includes(n)&&!j(t,c)&&!b(t)}(o,r,e,g)){var t=r.concat(e);c(t),s(t.length)}},allowedBoard:g}),Object(S.jsx)("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2",children:Object(S.jsx)(Q,{winner:O})})]}),Object(S.jsxs)("div",{className:"flex space-x-4",children:[Object(S.jsx)(H,{winner:O,p1Turn:d}),Object(S.jsx)(V,{onLeftClick:function(){s((function(e){return Math.max(0,e-1)}))},onRightClick:function(){s((function(e){return Math.min(e+1,r.length)}))}})]})]})})}function G(e){var t=e.children,r=K("game-size",400),c=Object(l.a)(r,2),a=c[0],i=c[1],s=Object(n.useRef)(null),u=Boolean(navigator.userAgent.match(/Android|iPhone|iPad|iPod|Opera Mini|IEMobile/i));return Object(S.jsx)("div",{className:"relative",children:u?Object(S.jsx)("div",{style:{width:"90vw",height:"90vw"},children:t}):Object(S.jsx)(o.ResizableBox,{height:a,width:a,minConstraints:[200,200],lockAspectRatio:!0,draggableOpts:{nodeRef:s},onResizeStop:function(e,t){return i(t.size.width)},className:"flex items-center justify-center p-2",children:Object(S.jsx)("div",{ref:s,className:"w-full h-full",children:t})})})}function H(e){var t=e.p1Turn;return Object(S.jsxs)("div",{className:"flex flex-col items-center space-y-1",children:[Object(S.jsx)("span",{className:"text-sm font-bold tracking-wider text-gray-700 dark:text-gray-100 uppercase",children:"Current turn"}),Object(S.jsx)("div",{className:"flex items-center justify-center rounded w-8 h-8 bg-gray-200 dark:bg-gray-700",children:Object(S.jsx)(P,{className:"w-1/2 h-1/2",type:t?"X":"O"})})]})}function Q(e){var t=e.winner;return t?Object(S.jsx)("div",{className:"bg-gray-900 dark:bg-gray-200 px-4 py-2 rounded shadow-lg",children:Object(S.jsx)("span",{className:"font-medium text-white dark:text-gray-900",children:"Player ".concat("X"===t?"1":"2"," Wins!")})}):null}function Y(e){var t=e.dark,r=e.setDark;return Object(S.jsx)("div",{children:Object(S.jsx)("button",{className:"w-6 h-6 rounded-full focus:outline-none focus:ring",onClick:function(){return r(!t)},children:Object(S.jsx)("span",{children:t?"\u2600\ufe0f":"\ud83c\udf19"})})})}i.a.render(Object(S.jsx)(c.a.StrictMode,{children:Object(S.jsx)(q,{})}),document.getElementById("root"))}},[[33,1,2]]]);
//# sourceMappingURL=main.a15aa151.chunk.js.map