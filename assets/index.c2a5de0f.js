var e=Object.defineProperty,t=Object.prototype.hasOwnProperty,r=Object.getOwnPropertySymbols,n=Object.prototype.propertyIsEnumerable,a=(t,r,n)=>r in t?e(t,r,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[r]=n,l=(e,l)=>{for(var c in l||(l={}))t.call(l,c)&&a(e,c,l[c]);if(r)for(var c of r(l))n.call(l,c)&&a(e,c,l[c]);return e},c=(e,a)=>{var l={};for(var c in e)t.call(e,c)&&a.indexOf(c)<0&&(l[c]=e[c]);if(null!=e&&r)for(var c of r(e))a.indexOf(c)<0&&n.call(e,c)&&(l[c]=e[c]);return l};import{r as o,c as s,R as i,a as d}from"./vendor.f522bb79.js";!function(e=".",t="__import__"){try{self[t]=new Function("u","return import(u)")}catch(r){const n=new URL(e,location),a=e=>{URL.revokeObjectURL(e.src),e.remove()};self[t]=e=>new Promise(((r,l)=>{const c=new URL(e,n);if(self[t].moduleMap[c])return r(self[t].moduleMap[c]);const o=new Blob([`import * as m from '${c}';`,`${t}.moduleMap['${c}']=m;`],{type:"text/javascript"}),s=Object.assign(document.createElement("script"),{type:"module",src:URL.createObjectURL(o),onerror(){l(new Error(`Failed to import: ${e}`)),a(s)},onload(){r(self[t].moduleMap[c]),a(s)}});document.head.appendChild(s)})),self[t].moduleMap={}}}("/ultimate-tic-tac-toe/assets/");const u=o.createContext();function m(e){return g(Array(9).fill().map(((t,r)=>f(e,r))))}function f(e,t){return g(function(e,t){return Array(9).fill().map(((r,n)=>{const a=w(t,n),l=e.indexOf(a);return-1===l?null:l%2==0?"X":"O"}))}(e,t))}function g(e){const t=[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]];for(let r=0;r<t.length;r++){const[n,a,l]=t[r];if(e[n]&&e[n]===e[a]&&e[n]===e[l])return e[n]}return null}function w(e,t){return`${e},${t}`}function h(e){return o.createElement("svg",l({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},e),o.createElement("path",{d:"M 2,2 l 20,20",stroke:"currentcolor",strokeWidth:4,strokeLinecap:"round"}),o.createElement("path",{d:"M 2,22 l 20,-20",stroke:"currentcolor",strokeWidth:4,strokeLinecap:"round"}))}function p(e){return o.createElement("svg",l({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},e),o.createElement("path",{d:"M 12 2 a 10 10 0 1 0 0.000001 0 z",fill:"none",stroke:"currentcolor",strokeWidth:4}))}function y(e){var{type:t,className:r}=e,n=c(e,["type","className"]);switch(t){case"X":return o.createElement(h,l({className:s("text-red-500",r)},n));case"O":return o.createElement(p,l({className:s("text-blue-500",r)},n));default:return o.createElement("div",l({},n))}}function k(e){var{isValid:t,className:r,children:n}=e,a=c(e,["isValid","className","children"]);return o.createElement("button",l({className:s("relative flex items-center justify-center rounded w-full h-full disabled:cursor-default","m-px","bg-gradient-to-b from-gray-100 to-gray-100 shadow hover:to-gray-50 active:shadow-inner","dark:from-gray-700 dark:to-gray-700 dark:hover:to-gray-600 dark:active:from-gray-800 dark:active:to-gray-800","focus:outline-none focus:ring",r)},a),n)}function v({turns:e,cellClick:t,allowedBoard:r}){return o.createElement("div",{className:"h-full relative grid grid-cols-3 rounded gap-[4%]"},Array(9).fill().map(((n,a)=>o.createElement(E,{key:a,turns:e,cellClick:t,allowedBoard:r,boardIndex:a}))))}function E({turns:e,cellClick:t,allowedBoard:r,boardIndex:n}){o.useContext(u);const a=f(e,n),l=!a&&[!0,n].includes(r);return o.createElement("div",{className:s("grid grid-cols-3 rounded gap-[4%]",!l&&"filter blur-[1px] contrast-75 dark:contrast-125 grayscale-[30%] dark:grayscale-[40%]")},Array(9).fill().map(((r,c)=>{const i=w(n,c),d=function(e,t){const r=e.indexOf(t);return-1===r?null:r%2==0?"X":"O"}(e,i);return o.createElement(k,{key:c,id:i,onClick:()=>t(i),onKeyDown:({key:e})=>{switch(e){case"ArrowUp":case"ArrowRight":case"ArrowDown":case"ArrowLeft":return function(e,t){const r=function(e,t){const[r,n]=t.split(",").map(Number);switch(e){case"ArrowUp":return[3,4,5,6,7,8].includes(n)?`${r},${n-3}`:[0,1,2].includes(r)?t:`${r-3},${n+6}`;case"ArrowRight":return[0,1,3,4,6,7].includes(n)?`${r},${n+1}`:[2,5,8].includes(r)?t:`${r+1},${n-2}`;case"ArrowDown":return[0,1,2,3,4,5].includes(n)?`${r},${n+3}`:[6,7,8].includes(r)?t:`${r+3},${n-6}`;case"ArrowLeft":return[1,2,4,5,7,8].includes(n)?`${r},${n-1}`:[0,3,6].includes(r)?t:`${r-1},${n+2}`;default:return t}}(e,t);document.getElementById(r).focus()}(e,i);default:return}},isValid:l,disabled:!l,className:s("X"===a&&"from-red-300 to-red-200 dark:from-red-600 dark:to-red-300","O"===a&&"from-blue-300 to-blue-200 dark:bg-blue-600 dark:bg-opacity-30")},o.createElement(y,{type:d,className:`animate-${d} absolute w-1/2 h-1/2 text-gray-900`}))})))}function b(e){return o.createElement("svg",l({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},e),o.createElement("polygon",{points:"18,2 4,12 18,22",stroke:"currentcolor",fill:"currentcolor",strokeLinejoin:"round",strokeWidth:2}))}function x(e){return o.createElement("svg",l({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},e),o.createElement("polygon",{points:"4,2 18,12 4,22",stroke:"currentcolor",fill:"currentcolor",strokeLinejoin:"round",strokeWidth:2}))}function N({isLeftActive:e,isRightActive:t,onLeftClick:r,onRightClick:n}){return o.createElement("div",{className:"flex items-center space-x-2"},o.createElement($,{disabled:!e,onClick:r,className:"rounded-l-xl"},o.createElement(b,{className:"w-4 h-4"})),o.createElement($,{disabled:!t,onClick:n,className:"rounded-r-xl"},o.createElement(x,{className:"w-4 h-4"})))}function $(e){var{className:t,children:r}=e,n=c(e,["className","children"]);return o.createElement("button",l({className:s("flex items-center justify-center h-12 w-12 focus:outline-none focus:ring bg-gradient-to-b","from-gray-100 to-gray-100 hover:to-gray-50 disabled:from-gray-50 shadow active:shadow-inner ","dark:from-gray-600 dark:to-gray-700 dark:hover:to-gray-600 dark:active:from-gray-800 dark:active:to-gray-700","disabled:bg-gray-500 dark:disabled:bg-gray-800 disabled:cursor-default","disabled:shadow-none text-gray-700 disabled:text-gray-400","dark:text-gray-100 dark:disabled:text-gray-300 dark:disabled:from-gray-800",t)},n),r)}function L(e,t){const[r,n]=o.useState((()=>{const r=window.localStorage.getItem(e);return r?JSON.parse(r):t}));return[r,t=>{const a=t instanceof Function?t(r):t;n(a),window.localStorage.setItem(e,JSON.stringify(a))}]}function O(){const[e,t]=L("dark-mode"),r=function(){const[e,t]=o.useState(window.matchMedia("(prefers-color-scheme: dark)").matches);return o.useEffect((()=>{const e=({matches:e})=>t(e);return window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",e),window.matchMedia("(prefers-color-scheme: dark)").removeEventListener("change",e)}),[]),e}(),n=void 0===e?r:e;return o.useEffect((()=>{const e=document.documentElement;n?e.classList.add("dark"):e.classList.remove("dark")}),[n]),[n,t]}function A(){const[e,t]=o.useState([]),[r,n]=o.useState(0),a=e.slice(0,r),l=e.length%2==0,c=function(e){if(!e.length)return!0;const t=e[e.length-1],r=Number(t[2]);return!!f(e,r)||r}(a),s=m(a);!function(e,t){o.useEffect((()=>{function r({key:r}){switch(r){case"k":return t((e=>Math.max(e-1,0)));case"j":return t((t=>Math.min(t+1,e.length)));case"K":return t(0);case"J":return t(e.length);default:return}}return window.addEventListener("keydown",r),()=>window.removeEventListener("keydown",r)}),[t,e.length])}(e,n);const[i,d]=O();return o.createElement(u.Provider,{value:i},o.createElement("div",{className:"absolute top-4 right-4"},o.createElement(C,{dark:i,setDark:d})),o.createElement("div",{className:"bg-white dark:bg-gray-900 flex flex-col items-center space-y-6"},o.createElement("h1",{className:"font-display text-xl mt-4 text-gray-900 dark:text-white"},"Ultimate Tic-Tac-Toe"),o.createElement(M,null,o.createElement(v,{turns:a,cellClick:function(a){if(function(e,t,r,n){if(e!==t.length)return!1;if(t.includes(r))return!1;const a=Number(r[0]);return!![!0,a].includes(n)&&!f(t,a)&&!m(t)}(r,e,a,c)){const r=e.concat(a);t(r),n(r.length)}},allowedBoard:c}),o.createElement("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2"},o.createElement(j,{winner:s}))),o.createElement("div",{className:"flex space-x-12"},o.createElement(R,{winner:s,p1Turn:l}),o.createElement(N,{isLeftActive:r>0,isRightActive:r<e.length,onLeftClick:()=>{n((e=>Math.max(0,e-1)))},onRightClick:()=>{n((t=>Math.min(t+1,e.length)))}}))))}function M({children:e}){const[t,r]=L("game-size",400),n=o.useRef(null),a=Boolean(navigator.userAgent.match(/Android|iPhone|iPad|iPod|Opera Mini|IEMobile/i));return o.createElement("div",{className:"relative"},a?o.createElement("div",{style:{width:"90vw",height:"90vw"}},e):o.createElement(i,{height:t,width:t,minConstraints:[200,200],lockAspectRatio:!0,draggableOpts:{nodeRef:n},onResizeStop:(e,t)=>r(t.size.width),className:"flex items-center justify-center p-2"},o.createElement("div",{ref:n,className:"w-full h-full"},e)))}function R({p1Turn:e}){return o.createElement("div",{className:"flex items-center space-x-1 bg-gray-100 dark:bg-gray-700 rounded px-2 pr-4"},o.createElement("div",{className:"flex items-center justify-center w-8 h-8"},o.createElement(y,{className:"w-1/2 h-1/2",type:e?"X":"O"})),o.createElement("span",{className:"text-xs font-semibold tracking-wider uppercase text-gray-600 dark:text-gray-100"},"To move"))}function j({winner:e}){return e?o.createElement("div",{className:"bg-gray-900 dark:bg-gray-200 px-4 py-2 rounded shadow-lg"},o.createElement("span",{className:"font-medium text-white dark:text-gray-900"},`Player ${"X"===e?"1":"2"} Wins!`)):null}function C({dark:e,setDark:t}){return o.createElement("div",null,o.createElement("button",{className:"w-6 h-6 rounded-full focus:outline-none focus:ring",onClick:()=>t(!e)},o.createElement("span",null,e?"☀️":"🌙")))}d.render(o.createElement(o.StrictMode,null,o.createElement(A,null)),document.getElementById("root"));
